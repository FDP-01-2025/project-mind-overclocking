#ifndef MAZE_MOVEMENT_1_HPP
#define MAZE_MOVEMENT_1_HPP

#include <iostream>
#include <string>
#include <vector>
#include <set>
#include "vector_utils.hpp"

using namespace std;

struct MapaConInicio {
    vector<string> mapa;
    int inicioX;
    int inicioY;
    set<string> caminosValidos;
    string personaje;
    string meta;
};

// Nueva estructura completa con meta incluida
struct MazeData {
    vector<vector<string>> grid;
    int inicioX;
    int inicioY;
    set<string> caminosValidos;
    string personaje;
    string meta;
};

void mostrarOpcionesDeMapa() {
    cout << "\nSelecciona una dificultad:\n";
    cout << "1. FÃ¡cil\n2. Medio\n3. DifÃ­cil\n";
    cout << "Ingresa el nÃºmero de dificultad: ";
}

void mostrarMapasPorDificultad(int dificultad) {
    switch (dificultad) {
        case 1:
            cout << "\nMapas FÃ¡ciles:\n1. JardÃ­n de Girasoles\n2. JardÃ­n Reducido\n";
            break;
        case 2:
            cout << "\nMapas Medios:\n1. Ratas\n2. Amigos Verdes\n3. Migajas\n";
            break;
        case 3:
            cout << "\nMapas DifÃ­ciles:\n1. Secretos 1\n2. Secretos 2\n3. Secretos 3\n4. Secretos 4\n5. Secretos 5\n";
            break;
        default:
            cout << "\nDificultad no vÃ¡lida.\n";
            break;
    }
    cout << "Selecciona el mapa (por nÃºmero): ";
}

MapaConInicio obtenerMapa(int dificultad, int seleccion) {
    switch (dificultad) {
        case 1:
            switch (seleccion) {
                case 1:
                    return {
                        {
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŒ¹ ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŒ¹ ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŒ¹ ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸž",
                            "ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»"
                        },
                        1, 1,
                        {"ðŸŸ¦", "ðŸž"},
                        "ðŸ",
                        "ðŸž"
                    };
                case 2:
                    return {
                        {
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸž ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»"
                        },
                        2, 4,
                        {"ðŸŸ¦", "ðŸž"},
                        "ðŸ",
                        "ðŸž"
                    };
            }
            break;
        case 2:
            switch (seleccion) {
                case 1:
                    return {
                        {
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ­ ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ§€ ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±"
                        },
                        4, 0,
                        {"ðŸ”²", "ðŸ§€", "ðŸ­"},
                        "ðŸ­",
                        "ðŸ§€"
                    };
                case 2:
                    return {
                        {
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿",
                            "ðŸ¸ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸ¢ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿"
                        },
                        0, 1,
                        {"ðŸŸ©", "ðŸ¢"},
                        "ðŸ¸",
                        "ðŸ¢"
                    };
                case 3:
                    return {
                        {
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ â­ â­ â­ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ ðŸŒ™ â­ ðŸ¤ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ â­ ðŸŒ™ â­ â­ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ â­ â­ ðŸŒ™",
                            "ðŸŒ™ â­ â­ ðŸŒ™ â­ â­ ðŸŒ™ ðŸŒ™ â­ ðŸŒ™",
                            "ðŸŒ™ ðŸŒ™ â­ â­ ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ â­ â­ â­ â­ â­ ðŸ¦",
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™"
                        },
                        6, 2,
                        {"â­", "ðŸ¤", "ðŸ¦"},
                        "ðŸ¤",
                        "ðŸ¦"
                    };
            }
            break;
        case 3:
            switch (seleccion) {
                case 1:
                    return {
                        {
                            "0 0 0 0 0 0",
                            "0 1 F 1 1 0",
                            "0 1 1 1 1 0",
                            "0 1 1 1 1 0",
                            "0 1 1 Y 1 0",
                            "0 0 0 0 0 0"
                        },
                        3, 4,
                        {"1", "F", "Y"},
                        "Y",
                        "F"
                    };
                case 2:
                    return {
                        {
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸž ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»"
                        },
                        2, 4,
                        {"ðŸŸ¦", "ðŸž"},
                        "ðŸ",
                        "ðŸž"
                    };
                case 3:
                    return {
                        {
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸ¢ âŽ ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸ¸ ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿"
                        },
                        1, 1,
                        {"ðŸŸ©", "ðŸ¢"},
                        "ðŸ¸",
                        "ðŸ¢"
                    };
                case 4:
                    return {
                        {
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ§± ðŸ”² ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ§€ ðŸ”² ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ­ ðŸ”² ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§±"
                        },
                        4, 7,
                        {"ðŸ”²", "ðŸ§€", "ðŸ­"},
                        "ðŸ­",
                        "ðŸ§€"
                    };
                case 5:
                    return {
                        {
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ ðŸŒ™ â­ â­ â­ â­ ðŸŒ™",
                            "ðŸŒ™ â­ â­ ðŸ¤ â­ â­ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ â­ â­ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ â­ â­ â­ ðŸŒ™",
                            "ðŸŒ™ ðŸ¦ ðŸŒ™ â­ â­ â­ ðŸŒ™",
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™"
                        },
                        2, 2,
                        {"â­", "ðŸ¤", "ðŸ¦"},
                        "ðŸ¤",
                        "ðŸ¦"
                    };
            }
            break;
    }

    cout << "Dificultad no vÃ¡lida. Se cargarÃ¡ el nivel fÃ¡cil por defecto.\n";
    return obtenerMapa(1, 1);
}

// FunciÃ³n que convierte el mapa y empaqueta todos los datos
MazeData getMazeGrid(int dificultad, int mapaSeleccion) {
    MapaConInicio mapa = obtenerMapa(dificultad, mapaSeleccion);
    auto grid = convertirAMatriz(mapa.mapa);
    return { grid, mapa.inicioX, mapa.inicioY, mapa.caminosValidos, mapa.personaje, mapa.meta };
}

#endif
