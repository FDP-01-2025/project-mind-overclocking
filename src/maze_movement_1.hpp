#ifndef MAZE_MOVEMENT_1_HPP
#define MAZE_MOVEMENT_1_HPP

#include <iostream>
#include <string>
#include <vector>
#include <set>
#include "vector_utils.hpp"

using namespace std;

struct MapWithStart {
    vector<string> map;
    int startX;
    int startY;
    set<string> validPaths;
    string character;
    string goal;
};

// New structure including goal
struct MazeData {
    vector<vector<string>> grid;
    int startX;
    int startY;
    set<string> validPaths;
    string character;
    string goal;
};

void showMapOptions() {
    cout << "\nSelect a difficulty:\n";
    cout << "1. Easy\n2. Medium\n3. Hard\n";
    cout << "Enter the difficulty number: ";
}

void showMapsByDifficulty(int difficulty) {
    switch (difficulty) {
        case 1:
            cout << "\nEasy Maps:\n1. Sunflower Garden\n2. Mini Garden\n";
            break;
        case 2:
            cout << "\nMedium Maps:\n1. Rats\n2. Green Friends\n3. Crumbs\n";
            break;
        case 3:
            cout << "\nHard Maps:\n1. Secrets 1\n2. Secrets 2\n3. Secrets 3\n4. Secrets 4\n5. Secrets 5\n";
            break;
        default:
            cout << "\nInvalid difficulty.\n";
            break;
    }
    cout << "Select the map (by number): ";
}

MapWithStart getMap(int difficulty, int selection) {
    switch (difficulty) {
        case 1:
            switch (selection) {
                case 1:
                    return {
                        {
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŒ¹ ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŒ¹ ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŒ¹ ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸž",
                            "ðŸŒ» ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»"
                        },
                        1, 1,
                        {"ðŸŸ¦", "ðŸž"},
                        "ðŸ",
                        "ðŸž"
                    };
                case 2:
                    return {
                        {
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸž ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»"
                        },
                        2, 4,
                        {"ðŸŸ¦", "ðŸž"},
                        "ðŸ",
                        "ðŸž"
                    };
            }
            break;
        case 2:
            switch (selection) {
                case 1:
                    return {
                        {
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ­ ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ§€ ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§± ðŸ§± ðŸ”² ðŸ§± ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±"
                        },
                        4, 0,
                        {"ðŸ”²", "ðŸ§€", "ðŸ­"},
                        "ðŸ­",
                        "ðŸ§€"
                    };
                case 2:
                    return {
                        {
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿",
                            "ðŸ¸ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŸ© ðŸ¢ ðŸŒ¿"
                        },
                        0, 1,
                        {"ðŸŸ©", "ðŸ¢"},
                        "ðŸ¸",
                        "ðŸ¢"
                    };
                case 3:
                    return {
                        {
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ â­ â­ â­ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ ðŸŒ™ â­ ðŸ¤ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ â­ ðŸŒ™ â­ â­ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ â­ â­ ðŸŒ™",
                            "ðŸŒ™ â­ â­ ðŸŒ™ â­ â­ ðŸŒ™ ðŸŒ™ â­ ðŸŒ™",
                            "ðŸŒ™ ðŸŒ™ â­ â­ ðŸŒ™ â­ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ â­ â­ â­ â­ â­ ðŸ¦",
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™"
                        },
                        6, 2,
                        {"â­", "ðŸ¤", "ðŸ¦"},
                        "ðŸ¤",
                        "ðŸ¦"
                    };
            }
            break;
        case 3:
            switch (selection) {
                case 1:
                    return {
                        {
                            "0 0 0 0 0 0",
                            "0 1 F 1 1 0",
                            "0 1 1 1 1 0",
                            "0 1 1 1 1 0",
                            "0 1 1 Y 1 0",
                            "0 0 0 0 0 0"
                        },
                        3, 4,
                        {"1", "F", "Y"},
                        "Y",
                        "F"
                    };
                case 2:
                    return {
                        {
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸž ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŸ¦ ðŸ ðŸŸ¦ ðŸŸ¦ ðŸŒ»",
                            "ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ» ðŸŒ»",
                            
                        },
                        2, 4,
                        {"ðŸŸ¦", "ðŸž"},
                        "ðŸ",
                        "ðŸž"
                    };
                case 3:
                    return {
                        {
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸ¢ ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŸ© ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸ¸ ðŸŸ© ðŸŸ© ðŸŒ¿",
                            "ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿ ðŸŒ¿"
                        },
                        1, 1,
                        {"ðŸŸ©", "ðŸ¢"},
                        "ðŸ¸",
                        "ðŸ¢"
                    };
                case 4:
                    return {
                        {
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ§± ðŸ”² ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ§€ ðŸ”² ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ”² ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ”² ðŸ”² ðŸ­ ðŸ”² ðŸ”² ðŸ§± ðŸ§±",
                            "ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§± ðŸ§±"
                        },
                        4, 7,
                        {"ðŸ”²", "ðŸ§€", "ðŸ­"},
                        "ðŸ­",
                        "ðŸ§€"
                    };
                case 5:
                    return {
                        {
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ ðŸŒ™ â­ â­ â­ â­ ðŸŒ™",
                            "ðŸŒ™ â­ â­ ðŸ¤ â­ â­ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ â­ â­ ðŸŒ™ ðŸŒ™",
                            "ðŸŒ™ â­ ðŸŒ™ â­ â­ â­ ðŸŒ™",
                            "ðŸŒ™ ðŸ¦ ðŸŒ™ â­ â­ â­ ðŸŒ™",
                            "ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™ ðŸŒ™"
                        },
                        2, 2,
                        {"â­", "ðŸ¤", "ðŸ¦"},
                        "ðŸ¤",
                        "ðŸ¦"
                    };
            }
            break;
    }

    cout << "Invalid difficulty. Defaulting to easy level.\n";
    return getMap(1, 1);
}

// Converts the map and packs all the data
MazeData getMazeGrid(int difficulty, int mapSelection) {
    MapWithStart map = getMap(difficulty, mapSelection);
    auto grid = convertToMatrix(map.map);
    return { grid, map.startX, map.startY, map.validPaths, map.character, map.goal };
}

#endif
